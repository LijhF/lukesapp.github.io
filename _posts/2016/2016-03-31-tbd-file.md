---
layout: post
title: 关于XCode7中的tbd文件
categories:
- Programming
tags:
- iOS
- XCode
---

tbd 的意思 **text based text-based stub libraries**的缩写，
是苹果在XCode7中使用的一个技术，便于减少XCode7中相应的SDK的体积。

我们拿CFNetwork举例      
iPhoneOS SDK中对应的路径`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/System/Library/Frameworks/CFNetwork.framework`   
MacOSX SDK对应的路径`/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/CFNetwork.framework`   
使用文本编辑器查看目录下的CFNetwork.tbd我们可以看到如下信息，其中包含架构信息，以及在真实运行时候二进制所在的位置。
所以可想而之tbd文件只是动态库的一个描述，以及用于编译阶段能够让编译进行下去，真正运行的时候使用的是其实是真正设备或者模拟器系统中对应的install-name的库文件。

```
---
archs:           [ armv7, armv7s, arm64 ]
platform:        ios
install-name:    /System/Library/Frameworks/CFNetwork.framework/CFNetwork
current-version: 758.3.15
exports:
  - archs:           [ armv7, armv7s, arm64 ]
    symbols:         [ '$ld$hide$os4.3$_NSHTTPCookieComme...
```


Mac系统中对应的路径 `/System/Library/Frameworks/CFNetwork.framework`   
模拟器中对应的路径 `/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CFNetwork.framework`